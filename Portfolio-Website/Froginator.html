<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        canvas {
            display: block;
            margin: 0 auto;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
</head>
<body>
    <script>
        let figureX;
        let figureY;
        let bulletX;
        let bulletSpeed = 5;
        let bulletFired = false;

        function setup() {
            createCanvas(400, 400);
            figureX = width / 2;
            figureY = height - 50;
        }

        function draw() {
            background(220);

            // Update the figure's position to follow the mouse
            figureX = mouseX;
            figureY = mouseY;

            // Draw the figure
            background(255);
            translate(-width / 2, -height / 2);
            translate(figureX, figureY);

            // Draw the figure
            fill(200);
            strokeWeight(3);
            stroke(0);
            // Head
            beginShape();
            vertex(width / 4, height / 10);
            vertex(3 / 8 * width, 0);
            vertex(5 / 8 * width, 0);
            vertex(6 / 8 * width, height / 10);
            vertex(5 / 8 * width, height / 5);
            vertex(3 / 8 * width, height / 5);
            vertex(width / 4, height / 10);
            endShape();
            fill(0, 0, 255);

            // Eyes
            beginShape();
            vertex(6 / 16 * width, height / 10);
            vertex(13 / 32 * width, 3 / 40 * height);
            vertex(14 / 32 * width, height / 10);
            vertex(13 / 32 * width, 5 / 40 * height);
            vertex(6 / 16 * width, height / 10);
            endShape();
            beginShape();
            vertex(10 / 16 * width, height / 10);
            vertex(19 / 32 * width, 3 / 40 * height);
            vertex(18 / 32 * width, height / 10);
            vertex(19 / 32 * width, 5 / 40 * height);
            vertex(10 / 16 * width, height / 10);
            endShape();

            // Body-ellipse-below
            fill(200);
            noStroke();
            ellipse(width / 2, height / 2, width / 5, height / 20);

            // Body
            fill(0, 0, 240);
            stroke(0);
            rect(4 / 10 * width, height / 4, width / 5, height / 4);

            // Neck
            fill(0, 0, 255);
            ellipse(width / 2, height / 4, width / 5, height / 20);
            rect(14 / 32 * width, height / 5, 1 / 8 * width, 2 / 30 * width);
            fill(150);

            // Wheels
            ellipse(4 / 10 * width, height / 2 + width / 10, height / 20, width / 5);
            noStroke();
            rect(4 / 10 * width, height / 2, 1 / 20 * width, width / 5);
            stroke(0);
            stroke(0);
            fill(200);
            ellipse(9 / 20 * width, height / 2 + width / 10, height / 20, width / 5);
            fill(150);
            ellipse(11 / 20 * width, height / 2 + width / 10, height / 20, width / 5);
            noStroke();
            rect(11 / 20 * width, height / 2, 1 / 20 * width, width / 5);
            stroke(0);
            fill(200);
            ellipse(12 / 20 * width, height / 2 + width / 10, height / 20, width / 5);
            line(8 / 20 * width, height / 2, 9 / 20 * width, height / 2);
            line(11 / 20 * width, height / 2, 12 / 20 * width, height / 2);
            line(8 / 20 * width, height / 2 + width / 5, 9 / 20 * width, height / 2 + width / 5);
            line(11 / 20 * width, height / 2 + width / 5, 12 / 20 * width, height / 2 + width / 5);

            // Weapon
            fill(150);
            ellipse(5 / 9 * width, 2 / 5 * height, width / 12, width / 4);
            noStroke();
            rect(5 / 9 * width, 2 / 5 * height - width / 8, 1 / 18 * width, width / 4);
            fill(200);
            stroke(0);
            ellipse(11 / 18 * width, 2 / 5 * height, width / 12, width / 4);
            fill(0);
            ellipse(11 / 18 * width, 2 / 5 * height, width / 24, width / 8);

            // Draw the bullet if fired
            if (bulletFired) {
                fill(0, 255, 0);
                ellipse(bulletX, figureY, 20, 20);
                bulletX += bulletSpeed;

                // Check if the bullet reaches the right edge of the canvas
                if (bulletX > width) {
                    bulletFired = false;
                    console.log("Bullet missed!");
                }
            }
        }

        function mouseClicked() {
            if (!bulletFired) {
                // Fire a bullet
                bulletX = figureX;
                bulletFired = true;
            }
        }
    </script>
</body>
</html>
